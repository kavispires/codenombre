(this.webpackJsonpcodenombre=this.webpackJsonpcodenombre||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),r=t(13),c=t.n(r),l=(t(85),t(9)),s=t(141),o=t(138),m=t(62),u=t(35),d=t(60),h=t(61),f={GG:2,AA:1,AG:1,AB:1,GA:1,BA:1,BB:3,GB:3,BG:3},b={classic:25,simple:16,pictures:20,dixit:16,deception:20},g={classic:{GG:3,AA:1,AG:1,AB:1,GA:1,BA:1,BB:7,GB:5,BG:5},simple:f,pictures:{GG:3,AA:1,AG:1,AB:1,GA:1,BA:1,BB:4,GB:4,BG:4},dixit:f},p={A:"alpha",B:"bravo",C:"charlie",D:"delta",E:"echo",F:"foxtrot",G:"golf",H:"hotel",I:"india",J:"juliet",K:"kilo",L:"lima",M:"mike",N:"november",O:"oscar",P:"papa",Q:"quebek",R:"romeo",S:"sierra",T:"tango",U:"uniform",V:"victor",W:"whiskey",X:"x-ray",Y:"yankee",Z:"zulu"},v=function(e){var a=Object(u.a)(e);return a.sort((function(){return Math.random()-.5})),a},y=t(86),E=new(function(){function e(){Object(d.a)(this,e),this._dbRef=null,this.gameID=null,this.mode=null,this.difficulty=null,this.players=[],this.me=null,this.codenames=[],this.turn=0,this.cluesA=[],this.cluesB=[],this.keyCardA=[],this.keyCardB=[],this.whoAmI="A"}return Object(h.a)(e,[{key:"init",value:function(e,a,t){return this.reset(),this.gameID=e,this.mode=a,this.difficulty=t,this.setup(),this.state()}},{key:"save",value:function(e){this._dbRef.update(e)}},{key:"setDbRef",value:function(e){this._dbRef=e}},{key:"setGameID",value:function(e){this.gameID=e}},{key:"isMyNicknameSet",value:function(){return this.players.includes(this.me)}},{key:"setPlayer",value:function(e){this.players.includes(e)||(this.players.push(e),this.me=e,this.save({players:this.players}),console.log("players",this.players),console.log("me",this.me))}},{key:"state",value:function(){return{gameID:this.gameID,mode:this.mode,difficulty:this.difficulty,players:this.players,codenames:this.codenames,keyCard:this.keyCard}}},{key:"update",value:function(e){return console.log("%cUpdating game...","background:LemonChiffon",e),this.gameID=e.gameID,this.mode=e.mode,this.difficulty=e.difficulty,this.players=e.players||[],this.codenames=e.codenames,this.keyCard=e.keyCard,this.state()}},{key:"reset",value:function(){}},{key:"setup",value:function(){var e=b[this.mode],a=g[this.mode],t=Object.entries(a).reduce((function(e,a){var t=Object(l.a)(a,2),n=t[0],i=t[1],r=new Array(i).fill(n);return[].concat(Object(u.a)(e),Object(u.a)(r))}),[]);this.keyCard=v(t),this.codenames=function(e,a){for(var t=v(e),n=new Array(a).fill(null),i=0;i<n.length;i++){var r=t[i];n[i]=r}return n}(y,e)}},{key:"getMyKeys",value:function(){return"A"===this.whoAmI?this.keyCard:this.keyCard.reverse()}}]),e}()),O={gameID:null,nickname:null,isLoading:!1,game:E.state(),dbRef:null,screen:"home",toast:{isVisible:!1,message:""}},j=Object(m.createGlobalState)(O).useGlobalState,k=t(63),D=t.n(k).a.initializeApp({apiKey:"AIzaSyA5uW5M2mnsbTe5FageZQeOtVuQ6hwLcD0",authDomain:"game-session.firebaseapp.com",databaseURL:"https://game-session.firebaseio.com",projectId:"game-session",storageBucket:"game-session.appspot.com",messagingSenderId:"446752882490",appId:"1:446752882490:web:559aec721133be173e1a03",measurementId:"G-61D49M1X04"}).database(),G=t(24),I={error:function(e,a){return Object(G.a)({},e,{isVisible:!0,severity:"error",message:a})},info:function(e,a){return Object(G.a)({},e,{isVisible:!0,severity:"info",message:a})},success:function(e,a){return Object(G.a)({},e,{isVisible:!0,severity:"success",message:a})},warning:function(e,a){return Object(G.a)({},e,{isVisible:!0,severity:"warning",message:a})}},w=t(132),A=function(e){var a=e.gameID;return i.a.createElement(w.a,{className:"header",position:"static"},i.a.createElement("div",{className:"header__game-id"},"game id"),i.a.createElement("h1",null,a),i.a.createElement("div",{className:"header__military-translation"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("").map((function(e){return p[e]})).join(" \u2022 ")}(a)))},N=t(136),C=function(){var e=j("dbRef"),a=Object(l.a)(e,2),t=a[0],r=(a[1],j("game")),c=Object(l.a)(r,2),s=(c[0],c[1],j("nickname")),o=Object(l.a)(s,1)[0];return Object(n.useEffect)((function(){console.log(t),t&&E.setPlayer(o)}),[t,o]),i.a.createElement("div",{className:"game-waiting-room"},i.a.createElement("div",null,i.a.createElement(N.a,null),i.a.createElement("div",{className:"game-waiting-room__message"},"Waiting for players to join...")))},B=function(){var e=j("dbRef"),a=Object(l.a)(e,2),t=a[0],r=a[1],c=j("game"),s=Object(l.a)(c,2),o=s[0],m=s[1],u=j("gameID"),d=Object(l.a)(u,2),h=d[0],f=d[1],b=j("isLoading"),g=Object(l.a)(b,2)[1],p=j("screen"),v=Object(l.a)(p,2),y=v[0],O=v[1],k=j("toast"),G=Object(l.a)(k,2),w=G[0],N=G[1];return Object(n.useEffect)((function(){null===o.gameID&&h&&(g(!0),D.ref("codenombre/".concat(h)).once("value",(function(e){if(e.val()){var a=D.ref().child("codenombre").child(h);E.setGameID(h),E.setDbRef(a),r(a)}else f(null),E.setGameID(null),N(I.error(w,"Failed to start game session")),O("home");m(E.state()),g(!1)})))}),[]),Object(n.useEffect)((function(){if(t){var e=function(e){g(!0),e.val()&&m(E.update(e.val())),g(!1)};return t.on("value",e),function(){t.off("value",e),g(!1),N(I.info(w,"Server disconnected"))}}}),[t,m,g,N,w]),i.a.createElement("div",{className:"game"},i.a.createElement(A,{gameID:h}),i.a.createElement("div",{className:"game-content"},"game.waiting"===y&&i.a.createElement(C,null)))},x=function(e){e.gameID;return i.a.createElement(w.a,{className:"header",position:"static"},i.a.createElement("div",{className:"header__game-id"},"Welcome to"),i.a.createElement("h1",null,"CODENOMBRE"))},S=t(142),R=t(139),M=t(52),T=function(e){var a=e.tempGameID,t=e.setTempGameID,r=j("gameID"),c=Object(l.a)(r,2),s=c[0],m=c[1],u=j("isLoading"),d=Object(l.a)(u,2),h=d[0],f=d[1],b=j("nickname"),g=Object(l.a)(b,2),p=g[0],v=g[1],y=j("screen"),E=Object(l.a)(y,2)[1],O=Object(n.useState)(!1),k=Object(l.a)(O,2),G=k[0],I=k[1],w=Object(n.useState)(!1),A=Object(l.a)(w,2),N=A[0],C=A[1],B=Object(n.useState)(""),x=Object(l.a)(B,2),T=x[0],V=x[1];Object(n.useEffect)((function(){s!==a&&4===(null===a||void 0===a?void 0:a.length)&&(f(!0),D.ref("codenombre/".concat(a.toUpperCase())).once("value",(function(e){e.val()?(m(a.toUpperCase()),I(!0),V("")):(V("Provided Game ID does not exist. Try again."),I(!1)),f(!1)}))),(null===a||void 0===a?void 0:a.length)<4&&I(!1),(null===p||void 0===p?void 0:p.length)>=3?C(!0):C(!1)}),[s,a,m,I,f,p,C]);return i.a.createElement("div",{className:"home-section join-game"},i.a.createElement(S.a,{className:"mui-full-width",required:!0,id:"nickname",label:"Nickname",onChange:function(e){return v(e.target.value)},helperText:p&&!N?"Nickname must be at least 3 characters long.":""}),i.a.createElement(S.a,{className:"mui-full-width",required:!0,id:"game-id",label:"Game ID",onChange:function(e){return t(e.target.value)},defaultValue:a,helperText:T}),i.a.createElement("div",null,h&&i.a.createElement(o.a,null)),i.a.createElement(R.a,{className:"mui-block",variant:"contained",color:"primary",disabled:!N||!G,onClick:function(){E("game.waiting")},style:{background:M.a[500]}},"Join ",s),i.a.createElement("div",{className:"home-section home-secion--separator"},"- or -"),i.a.createElement("div",{className:"home-section create-game"},i.a.createElement(R.a,{className:"block",variant:"contained",color:"default",onClick:function(){E("home.create")}},"Create a Game")))},V=t(47),_=t(149),L=t(137),W=t(148),z=t(147),J=t(144),P=function(e){var a=e.setTempGameID,t=j("isLoading"),r=Object(l.a)(t,2),c=r[0],s=r[1],o=j("screen"),m=Object(l.a)(o,2)[1],u=j("toast"),d=Object(l.a)(u,2),h=d[0],f=d[1],b=Object(n.useState)("classic"),g=Object(l.a)(b,2),p=g[0],v=g[1],y=Object(n.useState)("normal"),O=Object(l.a)(y,2),k=O[0],w=O[1],A=function(){s(!0);var e=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a="";a.length<4;)a+=e[Math.floor(Math.random()*e.length)];return a}(),t=E.init(e,p,k);try{D.ref("/codenombre").update(Object(V.a)({},e,Object(G.a)({},t))),a(e),f(I.success(h,"Game created successfully. ID: ".concat(e))),s(!1),m("home")}catch(n){f(I.error(h,"Creating game has failed"))}finally{s(!1)}};return i.a.createElement("div",{className:"home-section create-game"},i.a.createElement(_.a,{component:"fieldset"},i.a.createElement(L.a,{component:"legend",className:"create-game-label"},"Game Type"),i.a.createElement(W.a,{name:"game-type",value:p,onChange:function(e){return v(e.target.value)}},i.a.createElement(z.a,{value:"classic",control:i.a.createElement(J.a,null),label:"Classic"}),i.a.createElement(z.a,{value:"simple",disabled:!0,control:i.a.createElement(J.a,null),label:"Simple"}),i.a.createElement(z.a,{value:"pictures",disabled:!0,control:i.a.createElement(J.a,null),label:"Pictures"}),i.a.createElement(z.a,{value:"dixit",disabled:!0,control:i.a.createElement(J.a,null),label:"Dixit"}),i.a.createElement(z.a,{value:"deception",disabled:!0,control:i.a.createElement(J.a,null),label:"Deception"})),i.a.createElement(L.a,{component:"legend",className:"create-game-label"},"Difficulty"),i.a.createElement(W.a,{name:"game-difficulty",value:k,onChange:function(e){return w(e.target.value)}},i.a.createElement(z.a,{value:"easy",control:i.a.createElement(J.a,null),label:"Easy"}),i.a.createElement(z.a,{value:"normal",control:i.a.createElement(J.a,null),label:"Normal"}))),i.a.createElement(R.a,{className:"block",variant:"contained",color:"primary",style:{background:M.a[500]},onClick:function(){return A()},disabled:c},"Create ",p," game"))},U=function(){var e=j("screen"),a=Object(l.a)(e,1)[0],t=Object(n.useState)(""),r=Object(l.a)(t,2),c=r[0],s=r[1];return i.a.createElement("div",{className:"home"},i.a.createElement(x,null),i.a.createElement("div",{className:"home-content"},"home"===a&&i.a.createElement(T,{tempGameID:c,setTempGameID:s}),"home.create"===a&&i.a.createElement(P,{tempGameID:c,setTempGameID:s})))},F=t(146),q=t(143),K=function(){var e=j("toast"),a=Object(l.a)(e,2),t=a[0],n=a[1],r=function(){n(Object(G.a)({},t,{isVisible:!1}))};return i.a.createElement(F.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.isVisible,autoHideDuration:6e3,onClose:r},i.a.createElement(q.a,{onClose:r,severity:t.severity},t.message))},Q=function(e){var a=j("isLoading"),t=Object(l.a)(a,1)[0],r=j("screen"),c=Object(l.a)(r,1)[0];return i.a.createElement(n.Fragment,null,i.a.createElement(s.a,{maxWidth:"lg"},t?i.a.createElement(o.a,null):i.a.createElement("div",{className:"progress-bar-placeholder"}),c.startsWith("home")&&i.a.createElement(U,null),c.startsWith("game")&&i.a.createElement(B,null)),i.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(n.StrictMode,null,i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,a,t){e.exports=t(100)},85:function(e,a,t){},86:function(e){e.exports=JSON.parse('["unicorn","frog","bear","dog","cow","horse","monster","elf","warrior","priest","table","coffee","box","piano","sax","ice","water","tea","orange","red","truck","bag","china","italy","brazil","america","france","headphones","ipad","dominoes","game","soccer","teacher","student","book","number","egg","social","tinder","computer","mario","sonic","airplane","couch","money","quarantine","sick","glasses","icecream","cheese","code","november","cell","cough","geek","dinner","sex","temperature","k-pop","salsa","taco","burrito","assassin","pen","stool","poop","dennis","paint","saturday","murder","music","despacito","time","beauty","whatsapp","australia","coronavirus","sad","distance","power","line","flower","virgin","google","apple","zombie","pandemic","mystery","story","love","husband","alone","online","circle","dinosaur","cable","explosion","cthulhu","pig","sailor","moon","mercury","roof","coyote","maze","math","review","order","word","mexico"]')}},[[80,1,2]]]);
//# sourceMappingURL=main.84c5cdea.chunk.js.map